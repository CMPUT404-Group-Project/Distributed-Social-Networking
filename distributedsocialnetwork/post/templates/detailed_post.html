{% extends 'base.html' %} 

{% block title %} {{ post.title }} {% endblock %}

{% block content %}
  <div class="row p-0 m-0">
    <div class="col sidebar bg-light">
      <!-- Left sidebar content goes here -->
    </div>
    <div class="col-8 stream bg-white pb-3" id="stream">
      <!-- Main stream content goes here -->
      <!-- The post -->
      <div class="row p-2 justify-content-left">
        <h2>Post</h2>
      </div>
      <div class="card m-2 post">
        <div class="card-body">
          <a class="card-title" href="{{ post.source }}">
            <div class="row-12">
              <h5>{{ post.title }}</h5>
            </div>
          </a>
          <h6 class="card-subtitle mb-2 text-muted">{{ post.description }}</h6>
          <p class="card-text">{{ post.content }}</p>
        </div>
        <div class="card-footer text-muted text-right p-2">
          <p class="m-0">{{ post.author.first_name }} {{ post.author.last_name }}</p>
          <p class="small m-0">{{ post.published }}</p>
        </div>
      </div>
      <!-- The comments -->
      <div class="row p-2 justify-content-left">
        <h2>Comments</h2>
      </div>
      {% for comment in comments %}
      <div class="card m-4 comment">
        <div class="card-body">
          <p class="card-text">{{ comment.comment }}</p>
        </div>
        <div class="card-footer text-muted text-right p-2">
          <p class="m-0">{{ comment.author.first_name }} {{ comment.author.last_name }}</p>
          <p class="small m-0">{{ comment.published }}</p>
        </div>
      </div>
      {% endfor %}
      <!-- The Comment Form -->
      {% if user.is_authenticated %}
      <div class="row p-2 justify-content-left">
        <h2>Add a Comment:</h2>
      </div>
       <div class="col-12 my-2">
         <form method="POST">
           {% csrf_token %} 
           {% for field in postCommentForm %}
           <div class="card m-2">{{field}}</div>
           {% endfor %}{% if postCommentForm.non_field_errors %}
           <div style="color: red">
           <p>{{postCommentForm.non_field_errors}}</p>	     
           </div>
           {% endif %}
           <button type="submit" class="btn btn-lg btn-block btn-outline-primary">Submit Comment</button>
         </form>	 
       </div>
       {% endif %}
    </div>
    <div class="col text-right sidebar bg-light">
      <!-- Right sidebar content goes here -->
    </div>
  </div>
  <!-- <div class="row-12">
    <div class="col-2 border-right">
    </div>
    <div class="col-10 text-center">
      <h1 style="font-style: italic; font-weight: 600;">
        {{post.title}}
      </h1>
      <h5>{{post.description}}</h5>
    </div>
  </div>
  <div class="row-12">
    <div class="col-2 border-right">
    </div>
    <div class="col-10 my-4">
      {% for paragraph in post.content %}
        <p class="px-3">{{paragraph}}</p>
      {% endfor %}
    </div>
  </div>
  {% if request.user.is_authenticated %}
  <div class="row-12 border-top">
	 <div class="col-3 my-2">
		<h2 class="text-danger">Add a Comment:</h2>
	 </div>
	 <div class="col-9 my-2">
	   <form method="POST">
	     {% csrf_token %} {% for field in postCommentForm %}
	     <p>{{field}}</p>
	     {% endfor %}{% if postCommentForm.non_field_errors %}
	     <div style="color: red">
			 <p>{{postCommentForm.non_field_errors}}</p>	     
	     </div>
	     {% endif %}
	     <button type="submit">Submit Comment</button>
	   </form>	 
	 </div>
  </div>
  {% endif %}
  <div class="row-12 border-top">
    <div class="col-3 my-2 pl-5">
      <h2 class="text-danger">Comments</h2>
    </div>
  </div>

  {% for comment in comments %}
  <div class="row-12 my-2">
    <div class="col-3"></div>
    {% if forloop.last %}
      <div class="col-2">
    {% else %}
      <div class="col-2 border-bottom ">
    {% endif %}
        <p class="mb-0">{{comment.author}}</p>
        <small>{{comment.published}}</small>
    </div>
    {% if forloop.last %}
    <div class="col-7">
    {% else %}
    <div class="col-7 border-bottom">
    {% endif %}
      <p>{{comment.comment}}</p>
    </div>
  </div>
  {% endfor %} -->
{% endblock %}